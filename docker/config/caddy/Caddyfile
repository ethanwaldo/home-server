# FILE: /home/waldo/server/docker/config/caddy/Caddyfile

# --- Publicly Accessible Sites ---

# Main website - serves static files with compression
# Main website - serves static files with compression
ethanwaldo.dev, :80 {
    # Reverse proxy for tree-gnome API
    handle /tree-gnome/api* {
        uri strip_prefix /tree-gnome/api
        reverse_proxy localhost:8000
    }

    # Reverse proxy for tree-gnome Frontend
    handle /tree-gnome* {
        reverse_proxy localhost:3000
    }

    # Reverse proxy for Graph Explorer (API and Frontend)
    handle /api* {
        reverse_proxy localhost:8050
    }

    # Serve Graph Explorer via FastAPI backend
    handle {
        reverse_proxy localhost:8050
    }
}

# Headscale VPN server - proxy to local service
hs.ethanwaldo.dev {
    reverse_proxy localhost:8080
}

# Task Slayer - Project for college course
taskslayer.ethanwaldo.dev {
    # Frontend
    reverse_proxy localhost:3001

    # Backend API
    handle_path /api* {
        reverse_proxy localhost:5001
    }
}
